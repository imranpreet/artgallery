{"ast":null,"code":"// Minimal virtual scroll implementation.\n// It hides the native scrollbar and simulates scrolling by translating\n// the content container. This preserves wheel, touch, and keyboard input.\n\nexport default function initVirtualScroll(containerSelector = 'main') {\n  const container = document.querySelector(containerSelector);\n  if (!container) return null;\n\n  // Wrap content in a scroller element that we will translate\n  const scroller = document.createElement('div');\n  scroller.className = 'virtual-scroller';\n  // move children into scroller\n  while (container.firstChild) {\n    scroller.appendChild(container.firstChild);\n  }\n  container.appendChild(scroller);\n\n  // Hide native scrollbar\n  const previousBodyOverflow = document.body.style.overflow;\n  document.body.style.overflow = 'hidden';\n  let currentY = 0;\n  let maxScroll = Math.max(0, scroller.scrollHeight - window.innerHeight);\n  const setTransform = () => {\n    scroller.style.transform = `translateY(${-currentY}px)`;\n  };\n  const clamp = v => Math.max(0, Math.min(v, maxScroll));\n  const onWheel = e => {\n    e.preventDefault();\n    currentY = clamp(currentY + e.deltaY);\n    setTransform();\n  };\n  let touchStartY = 0;\n  let isTouching = false;\n  const onTouchStart = e => {\n    isTouching = true;\n    touchStartY = e.touches[0].clientY;\n  };\n  const onTouchMove = e => {\n    if (!isTouching) return;\n    const delta = touchStartY - e.touches[0].clientY;\n    touchStartY = e.touches[0].clientY;\n    currentY = clamp(currentY + delta);\n    setTransform();\n  };\n  const onTouchEnd = () => {\n    isTouching = false;\n  };\n  const onKey = e => {\n    const step = 80;\n    if (e.key === 'ArrowDown') {\n      currentY = clamp(currentY + step);\n      setTransform();\n    } else if (e.key === 'ArrowUp') {\n      currentY = clamp(currentY - step);\n      setTransform();\n    } else if (e.key === 'PageDown') {\n      currentY = clamp(currentY + window.innerHeight * 0.9);\n      setTransform();\n    } else if (e.key === 'PageUp') {\n      currentY = clamp(currentY - window.innerHeight * 0.9);\n      setTransform();\n    } else if (e.key === 'Home') {\n      currentY = 0;\n      setTransform();\n    } else if (e.key === 'End') {\n      currentY = maxScroll;\n      setTransform();\n    }\n  };\n  const onResize = () => {\n    maxScroll = Math.max(0, scroller.scrollHeight - window.innerHeight);\n    currentY = clamp(currentY);\n    setTransform();\n  };\n\n  // initial styles\n  scroller.style.willChange = 'transform';\n  scroller.style.transition = 'transform 0.12s linear';\n\n  // attach\n  container.addEventListener('wheel', onWheel, {\n    passive: false\n  });\n  container.addEventListener('touchstart', onTouchStart, {\n    passive: true\n  });\n  container.addEventListener('touchmove', onTouchMove, {\n    passive: false\n  });\n  container.addEventListener('touchend', onTouchEnd, {\n    passive: true\n  });\n  window.addEventListener('keydown', onKey);\n  window.addEventListener('resize', onResize);\n\n  // set initial transform\n  onResize();\n\n  // cleanup\n  return () => {\n    container.removeEventListener('wheel', onWheel);\n    container.removeEventListener('touchstart', onTouchStart);\n    container.removeEventListener('touchmove', onTouchMove);\n    container.removeEventListener('touchend', onTouchEnd);\n    window.removeEventListener('keydown', onKey);\n    window.removeEventListener('resize', onResize);\n    document.body.style.overflow = previousBodyOverflow;\n    // move children back out of scroller\n    while (scroller.firstChild) container.appendChild(scroller.firstChild);\n    scroller.remove();\n  };\n}","map":{"version":3,"names":["initVirtualScroll","containerSelector","container","document","querySelector","scroller","createElement","className","firstChild","appendChild","previousBodyOverflow","body","style","overflow","currentY","maxScroll","Math","max","scrollHeight","window","innerHeight","setTransform","transform","clamp","v","min","onWheel","e","preventDefault","deltaY","touchStartY","isTouching","onTouchStart","touches","clientY","onTouchMove","delta","onTouchEnd","onKey","step","key","onResize","willChange","transition","addEventListener","passive","removeEventListener","remove"],"sources":["/home/sama/Desktop/zigga copy/src/virtualScroll.js"],"sourcesContent":["// Minimal virtual scroll implementation.\n// It hides the native scrollbar and simulates scrolling by translating\n// the content container. This preserves wheel, touch, and keyboard input.\n\nexport default function initVirtualScroll(containerSelector = 'main') {\n  const container = document.querySelector(containerSelector);\n  if (!container) return null;\n\n  // Wrap content in a scroller element that we will translate\n  const scroller = document.createElement('div');\n  scroller.className = 'virtual-scroller';\n  // move children into scroller\n  while (container.firstChild) {\n    scroller.appendChild(container.firstChild);\n  }\n  container.appendChild(scroller);\n\n  // Hide native scrollbar\n  const previousBodyOverflow = document.body.style.overflow;\n  document.body.style.overflow = 'hidden';\n\n  let currentY = 0;\n  let maxScroll = Math.max(0, scroller.scrollHeight - window.innerHeight);\n\n  const setTransform = () => {\n    scroller.style.transform = `translateY(${-currentY}px)`;\n  };\n\n  const clamp = (v) => Math.max(0, Math.min(v, maxScroll));\n\n  const onWheel = (e) => {\n    e.preventDefault();\n    currentY = clamp(currentY + e.deltaY);\n    setTransform();\n  };\n\n  let touchStartY = 0;\n  let isTouching = false;\n  const onTouchStart = (e) => {\n    isTouching = true;\n    touchStartY = e.touches[0].clientY;\n  };\n  const onTouchMove = (e) => {\n    if (!isTouching) return;\n    const delta = touchStartY - e.touches[0].clientY;\n    touchStartY = e.touches[0].clientY;\n    currentY = clamp(currentY + delta);\n    setTransform();\n  };\n  const onTouchEnd = () => { isTouching = false; };\n\n  const onKey = (e) => {\n    const step = 80;\n    if (e.key === 'ArrowDown') { currentY = clamp(currentY + step); setTransform(); }\n    else if (e.key === 'ArrowUp') { currentY = clamp(currentY - step); setTransform(); }\n    else if (e.key === 'PageDown') { currentY = clamp(currentY + window.innerHeight * 0.9); setTransform(); }\n    else if (e.key === 'PageUp') { currentY = clamp(currentY - window.innerHeight * 0.9); setTransform(); }\n    else if (e.key === 'Home') { currentY = 0; setTransform(); }\n    else if (e.key === 'End') { currentY = maxScroll; setTransform(); }\n  };\n\n  const onResize = () => {\n    maxScroll = Math.max(0, scroller.scrollHeight - window.innerHeight);\n    currentY = clamp(currentY);\n    setTransform();\n  };\n\n  // initial styles\n  scroller.style.willChange = 'transform';\n  scroller.style.transition = 'transform 0.12s linear';\n\n  // attach\n  container.addEventListener('wheel', onWheel, { passive: false });\n  container.addEventListener('touchstart', onTouchStart, { passive: true });\n  container.addEventListener('touchmove', onTouchMove, { passive: false });\n  container.addEventListener('touchend', onTouchEnd, { passive: true });\n  window.addEventListener('keydown', onKey);\n  window.addEventListener('resize', onResize);\n\n  // set initial transform\n  onResize();\n\n  // cleanup\n  return () => {\n    container.removeEventListener('wheel', onWheel);\n    container.removeEventListener('touchstart', onTouchStart);\n    container.removeEventListener('touchmove', onTouchMove);\n    container.removeEventListener('touchend', onTouchEnd);\n    window.removeEventListener('keydown', onKey);\n    window.removeEventListener('resize', onResize);\n    document.body.style.overflow = previousBodyOverflow;\n    // move children back out of scroller\n    while (scroller.firstChild) container.appendChild(scroller.firstChild);\n    scroller.remove();\n  };\n}\n"],"mappings":"AAAA;AACA;AACA;;AAEA,eAAe,SAASA,iBAAiBA,CAACC,iBAAiB,GAAG,MAAM,EAAE;EACpE,MAAMC,SAAS,GAAGC,QAAQ,CAACC,aAAa,CAACH,iBAAiB,CAAC;EAC3D,IAAI,CAACC,SAAS,EAAE,OAAO,IAAI;;EAE3B;EACA,MAAMG,QAAQ,GAAGF,QAAQ,CAACG,aAAa,CAAC,KAAK,CAAC;EAC9CD,QAAQ,CAACE,SAAS,GAAG,kBAAkB;EACvC;EACA,OAAOL,SAAS,CAACM,UAAU,EAAE;IAC3BH,QAAQ,CAACI,WAAW,CAACP,SAAS,CAACM,UAAU,CAAC;EAC5C;EACAN,SAAS,CAACO,WAAW,CAACJ,QAAQ,CAAC;;EAE/B;EACA,MAAMK,oBAAoB,GAAGP,QAAQ,CAACQ,IAAI,CAACC,KAAK,CAACC,QAAQ;EACzDV,QAAQ,CAACQ,IAAI,CAACC,KAAK,CAACC,QAAQ,GAAG,QAAQ;EAEvC,IAAIC,QAAQ,GAAG,CAAC;EAChB,IAAIC,SAAS,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEZ,QAAQ,CAACa,YAAY,GAAGC,MAAM,CAACC,WAAW,CAAC;EAEvE,MAAMC,YAAY,GAAGA,CAAA,KAAM;IACzBhB,QAAQ,CAACO,KAAK,CAACU,SAAS,GAAG,cAAc,CAACR,QAAQ,KAAK;EACzD,CAAC;EAED,MAAMS,KAAK,GAAIC,CAAC,IAAKR,IAAI,CAACC,GAAG,CAAC,CAAC,EAAED,IAAI,CAACS,GAAG,CAACD,CAAC,EAAET,SAAS,CAAC,CAAC;EAExD,MAAMW,OAAO,GAAIC,CAAC,IAAK;IACrBA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClBd,QAAQ,GAAGS,KAAK,CAACT,QAAQ,GAAGa,CAAC,CAACE,MAAM,CAAC;IACrCR,YAAY,CAAC,CAAC;EAChB,CAAC;EAED,IAAIS,WAAW,GAAG,CAAC;EACnB,IAAIC,UAAU,GAAG,KAAK;EACtB,MAAMC,YAAY,GAAIL,CAAC,IAAK;IAC1BI,UAAU,GAAG,IAAI;IACjBD,WAAW,GAAGH,CAAC,CAACM,OAAO,CAAC,CAAC,CAAC,CAACC,OAAO;EACpC,CAAC;EACD,MAAMC,WAAW,GAAIR,CAAC,IAAK;IACzB,IAAI,CAACI,UAAU,EAAE;IACjB,MAAMK,KAAK,GAAGN,WAAW,GAAGH,CAAC,CAACM,OAAO,CAAC,CAAC,CAAC,CAACC,OAAO;IAChDJ,WAAW,GAAGH,CAAC,CAACM,OAAO,CAAC,CAAC,CAAC,CAACC,OAAO;IAClCpB,QAAQ,GAAGS,KAAK,CAACT,QAAQ,GAAGsB,KAAK,CAAC;IAClCf,YAAY,CAAC,CAAC;EAChB,CAAC;EACD,MAAMgB,UAAU,GAAGA,CAAA,KAAM;IAAEN,UAAU,GAAG,KAAK;EAAE,CAAC;EAEhD,MAAMO,KAAK,GAAIX,CAAC,IAAK;IACnB,MAAMY,IAAI,GAAG,EAAE;IACf,IAAIZ,CAAC,CAACa,GAAG,KAAK,WAAW,EAAE;MAAE1B,QAAQ,GAAGS,KAAK,CAACT,QAAQ,GAAGyB,IAAI,CAAC;MAAElB,YAAY,CAAC,CAAC;IAAE,CAAC,MAC5E,IAAIM,CAAC,CAACa,GAAG,KAAK,SAAS,EAAE;MAAE1B,QAAQ,GAAGS,KAAK,CAACT,QAAQ,GAAGyB,IAAI,CAAC;MAAElB,YAAY,CAAC,CAAC;IAAE,CAAC,MAC/E,IAAIM,CAAC,CAACa,GAAG,KAAK,UAAU,EAAE;MAAE1B,QAAQ,GAAGS,KAAK,CAACT,QAAQ,GAAGK,MAAM,CAACC,WAAW,GAAG,GAAG,CAAC;MAAEC,YAAY,CAAC,CAAC;IAAE,CAAC,MACpG,IAAIM,CAAC,CAACa,GAAG,KAAK,QAAQ,EAAE;MAAE1B,QAAQ,GAAGS,KAAK,CAACT,QAAQ,GAAGK,MAAM,CAACC,WAAW,GAAG,GAAG,CAAC;MAAEC,YAAY,CAAC,CAAC;IAAE,CAAC,MAClG,IAAIM,CAAC,CAACa,GAAG,KAAK,MAAM,EAAE;MAAE1B,QAAQ,GAAG,CAAC;MAAEO,YAAY,CAAC,CAAC;IAAE,CAAC,MACvD,IAAIM,CAAC,CAACa,GAAG,KAAK,KAAK,EAAE;MAAE1B,QAAQ,GAAGC,SAAS;MAAEM,YAAY,CAAC,CAAC;IAAE;EACpE,CAAC;EAED,MAAMoB,QAAQ,GAAGA,CAAA,KAAM;IACrB1B,SAAS,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEZ,QAAQ,CAACa,YAAY,GAAGC,MAAM,CAACC,WAAW,CAAC;IACnEN,QAAQ,GAAGS,KAAK,CAACT,QAAQ,CAAC;IAC1BO,YAAY,CAAC,CAAC;EAChB,CAAC;;EAED;EACAhB,QAAQ,CAACO,KAAK,CAAC8B,UAAU,GAAG,WAAW;EACvCrC,QAAQ,CAACO,KAAK,CAAC+B,UAAU,GAAG,wBAAwB;;EAEpD;EACAzC,SAAS,CAAC0C,gBAAgB,CAAC,OAAO,EAAElB,OAAO,EAAE;IAAEmB,OAAO,EAAE;EAAM,CAAC,CAAC;EAChE3C,SAAS,CAAC0C,gBAAgB,CAAC,YAAY,EAAEZ,YAAY,EAAE;IAAEa,OAAO,EAAE;EAAK,CAAC,CAAC;EACzE3C,SAAS,CAAC0C,gBAAgB,CAAC,WAAW,EAAET,WAAW,EAAE;IAAEU,OAAO,EAAE;EAAM,CAAC,CAAC;EACxE3C,SAAS,CAAC0C,gBAAgB,CAAC,UAAU,EAAEP,UAAU,EAAE;IAAEQ,OAAO,EAAE;EAAK,CAAC,CAAC;EACrE1B,MAAM,CAACyB,gBAAgB,CAAC,SAAS,EAAEN,KAAK,CAAC;EACzCnB,MAAM,CAACyB,gBAAgB,CAAC,QAAQ,EAAEH,QAAQ,CAAC;;EAE3C;EACAA,QAAQ,CAAC,CAAC;;EAEV;EACA,OAAO,MAAM;IACXvC,SAAS,CAAC4C,mBAAmB,CAAC,OAAO,EAAEpB,OAAO,CAAC;IAC/CxB,SAAS,CAAC4C,mBAAmB,CAAC,YAAY,EAAEd,YAAY,CAAC;IACzD9B,SAAS,CAAC4C,mBAAmB,CAAC,WAAW,EAAEX,WAAW,CAAC;IACvDjC,SAAS,CAAC4C,mBAAmB,CAAC,UAAU,EAAET,UAAU,CAAC;IACrDlB,MAAM,CAAC2B,mBAAmB,CAAC,SAAS,EAAER,KAAK,CAAC;IAC5CnB,MAAM,CAAC2B,mBAAmB,CAAC,QAAQ,EAAEL,QAAQ,CAAC;IAC9CtC,QAAQ,CAACQ,IAAI,CAACC,KAAK,CAACC,QAAQ,GAAGH,oBAAoB;IACnD;IACA,OAAOL,QAAQ,CAACG,UAAU,EAAEN,SAAS,CAACO,WAAW,CAACJ,QAAQ,CAACG,UAAU,CAAC;IACtEH,QAAQ,CAAC0C,MAAM,CAAC,CAAC;EACnB,CAAC;AACH","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}